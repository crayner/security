{% trans_default_domain 'security' %}
{% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
<script type="javascript" language="JavaScript">
    if (typeof jQuery !== 'undefined') {
        // idleTimeout
        $.getScript('{{ asset('bundles/hillrangesecurity/js/store/store.everything.min.js') }}');
        $.getScript('{{ asset('bundles/hillrangesecurity/js/jquery-idleTimeout.min.js') }}');
        $(document).ready(function () {
            $(document).idleTimeout({
                dialogTimeRemaining: '{{ 'idletimeout.timeRemaining'|trans }}',
                dialogStayLoggedInButton: '{{ 'idletimeout.stay'|trans }}',
                dialogLogOutNowButton: '{{ 'idletimeout.signout'|trans }}',
                idleTimeLimit: {{ get_parameter('idleTimeout', 15) * 60 - 30 }},
                dialogDisplayLimit: 30,
                activityEvents: 'click keypress scroll wheel mousewheel',
                sessionKeepAliveTimer: false,
                dialogTitle: '{{ 'idletimeout.title'|trans }}',
                dialogText: '{{ 'idletimeout.dialogue'|trans({'%time%': get_parameter('idleTimeout', 15) -  1}) }}',
                redirectUrl: '{{ path('hillrange_security_timeout') }}',
                customCallback: function () {
                    var close = '{{ app.request.get('closeWindow') }}';
                    if (close.length > 0)
                        window.close();
                }
            });
        });
    }
</script>
{% endif %}
